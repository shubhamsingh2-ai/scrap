name: CI

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Install UV
      uses: astral-sh/setup-uv@v4
      with:
        version: "latest"

    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: "3.10"

    - name: Install dependencies
      run: |
        uv sync --frozen

    # - name: Lint with UV
    #   run: |
    #     uv run python -m py_compile pyproject.toml
    #     uv run python -c "import ast; ast.parse(open('main.py').read())" || echo "main.py syntax check"

    - name: Test MkDocs build
      run: |
        uv run mkdocs build --clean --strict

    - name: Test MkDocs configuration
      run: |
        uv run mkdocs --version
        uv run mkdocs --help
